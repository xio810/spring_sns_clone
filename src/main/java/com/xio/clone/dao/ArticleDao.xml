<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xio.clone.dao.ArticleDao">

		<update id="modifyArticle">
				UPDATE article
				SET updateDate = NOW(),
				title =
				#{title},
				body = #{body}
				WHERE id = #{id}
		</update>

		<select id="getArticleById" resultType="Article">
				SELECT *
				FROM article
				WHERE id = #{id}
		</select>

		<insert id="writeArticle">
				INSERT INTO article
				SET regDate = NOW(),
				updateDate =
				NOW(),
				boardId = #{boardId},
				memberId = #{memberId},
				title = #{title},
				body = #{body}
		</insert>

		<update id="deleteArticle">
				UPDATE article
				SET delStatus = 1,
				delDate = NOW()
				WHERE id = #{id}
		</update>

		<select id="getLastInsertId" resultType="int">
				SELECT LAST_INSERT_ID()
		</select>

		<select id="getBoardById" resultType="Board">
				SELECT *
				FROM board AS B
				WHERE B.id = #{id}
				AND B.delStatus = 0
		</select>

		<select id="getArticlesTotalCount" resultType="int">
				SELECT COUNT(*) AS cnt
				FROM article AS A
				WHERE A.boardId = #{boardId}
				AND A.delStatus = 0
		</select>

</mapper>